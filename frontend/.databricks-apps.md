# Deploying to Databricks Apps

## Prerequisites

1. **Databricks CLI**: Install version 0.229.0 or above
   ```bash
   pip install databricks-cli
   ```

2. **Configure Databricks CLI**:
   ```bash
   databricks configure
   ```

3. **Node.js**: Ensure Node.js 22.16+ is available in your Databricks workspace

## Deployment Steps

### 1. Configure Environment Variables

Update `app.yaml` with your backend API URL:
```yaml
env:
  - name: VITE_API_BASE_URL
    value: "https://your-backend-url/api/"
```

### 2. Deploy the Application

From the frontend directory:
```bash
databricks apps deploy
```

Or specify the app name:
```bash
databricks apps deploy tuva-empi-frontend
```

### 3. View Application Logs

```bash
databricks apps logs tuva-empi-frontend
```

### 4. Get Application URL

```bash
databricks apps list
```

## How It Works

Databricks Apps will:
1. Detect `package.json` and install dependencies with `npm install`
2. Build the React app with `npm run build` (creates the `dist/` folder)
3. Start the Express server with `npm run start` (serves from `dist/`)
4. Expose your application on the configured port (3000)

## Key Differences from Next.js

- ✅ **No Next.js-specific dependencies**: Pure React + Vite
- ✅ **Standard Node.js server**: Express is fully supported
- ✅ **Simpler build process**: Vite produces static files + Express serves them
- ✅ **Better compatibility**: Standard Node.js patterns work everywhere

## Environment Variables

Set environment variables in `app.yaml` or through the Databricks workspace:

```yaml
env:
  - name: VITE_API_BASE_URL
    value: "YOUR_API_URL"
  - name: PORT
    value: "3000"
  - name: NODE_ENV
    value: "production"
```

## Monitoring

Access your application through the Databricks Apps interface to:
- View real-time logs
- Monitor resource usage
- Restart or update the application
- Configure scaling (if needed)

## Notes

- Databricks Apps requires **serverless compute** to be enabled in your workspace
- The application will be available at a Databricks-provided URL
- You can configure custom domains through Databricks settings

